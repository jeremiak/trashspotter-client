<!doctype html>
<head>
  <meta charset="utf-8">

  <title>trashspotter</title>
  <meta name="description" content="trashspot">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/styles.css">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.18.min.js"></script>
</head>

<body>
  
  <div id="main">
    <h1>OMG find the trashcans. </h1>

    <p>with parse(.com) as the database and all javascript that runs client side</p>

    <ul>
      <li>need map to show existing locations</li>
      <li> need much more</li>
    </ul>

    <div style="display:none" class="error">
      Looks like there was a problem saving the test object. Make sure you've set your application ID and javascript key correctly in the call to <code>Parse.initialize</code> in this file.
    </div>

    <div style="display:none" class="success">
      <p>We've also just created your first object using the following code:</p>
      
        <code>
          var TestObject = Parse.Object.extend("TestObject");<br/>
          var testObject = new TestObject();<br/>
          testObject.save({foo: "bar"});
        </code>
    </div>
  </div>
  <p>
  <p>we think you're here:</p>
    <p id="curr_loc">  </p>
  <div id="mapholder"></div>
 <button onclick="submitLocation()">I'm next to a trash can!</button>

<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
  <script type="text/javascript">
    Parse.initialize("mdcl9TzaR9eXsEnUdIhGtUGqUBwLQbHlKIyKhl1G", "NDdDQsfMWLAPHTjI8ctVFEdCJsYTxcoy00Q7beKu");    
    var TestObject = Parse.Object.extend("TestObject");
    var testObject = new TestObject();
      testObject.save({foo: "bar"}, {
      success: function(object) {
        $(".success").show();
      },
      error: function(model, error) {
        $(".error").show();
      }

    });

var x=document.getElementById("curr_loc");
navigator.geolocation.watchPosition(showPosition);


function showPosition(position)
  {
  lat=position.coords.latitude;
  lon=position.coords.longitude;
  latlon=new google.maps.LatLng(lat, lon)
  acc=position.coords.accuracy
  x.innerHTML="position data: " + latlon + acc;  
  mapholder=document.getElementById('mapholder')
  mapholder.style.height='250px';
  mapholder.style.width='100%';

  var myOptions={
  center:latlon,zoom:14,
  mapTypeId:google.maps.MapTypeId.ROADMAP,
  mapTypeControl:false,
  navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}
  };
  var map=new google.maps.Map(document.getElementById("mapholder"),myOptions);
  var marker=new google.maps.Marker({position:latlon,map:map,title:"You are here!"});

  // var img_url = "http://maps.googleapis.com/maps/api/staticmap?center="
  // +latlon+"&zoom=14&size=400x300&sensor=false";

  // document.getElementById("mapholder").innerHTML = "<img src='"+img_url+"'>";
  }

function submitLocation()
  {
  }

  </script>
</body>

</html>
